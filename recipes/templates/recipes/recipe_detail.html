{% extends 'recipes/base.html' %}

{% block content %}
  <div class="recipe-card">
    <h2>{{ recipe.title }}</h2>
    <p><strong>Category:</strong> {{ recipe.get_category_display }}</p>

    {% if recipe.image %}
      <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="img-fluid mb-3">
    {% else %}
      <p><em>No image available</em></p>
    {% endif %}

    <p><strong>Description:</strong></p>
    <p>{{ recipe.description }}</p>

    <p><strong>Ingredients:</strong></p>
    <p>{{ recipe.ingredients }}</p>

    <p><strong>Instructions:</strong></p>
    <p>{{ recipe.instructions }}</p>

    <p>❤️ Saved by {{ recipe.liked_by.count }} users</p>

    {% if user.is_authenticated %}
      <form action="{% url 'toggle_favorite' recipe.id %}" method="post">
        {% csrf_token %}
        {% if user in recipe.liked_by.all %}
          <button type="submit">💔 Unsave</button>
        {% else %}
          <button type="submit">❤️ Save</button>
        {% endif %}
      </form>
    {% endif %}
  </div>
{% endblock %}
